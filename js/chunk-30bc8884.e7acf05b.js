(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30bc8884"],{"6ca7":function(e,t,i){},ac7c:function(e,t,i){"use strict";var a=i("15fd"),r=i("5530"),n=(i("d3b7"),i("25f0"),i("6ca7"),i("ec29"),i("9d26")),s=i("c37a"),o=i("fe09"),l=["title"];t["a"]=o["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(e){var t=this;this.$nextTick((function(){return t.inputIndeterminate=e}))},inputIndeterminate:function(e){this.$emit("update:indeterminate",e)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var e=this.attrs$,t=(e.title,Object(a["a"])(e,l));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(n["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(r["a"])(Object(r["a"])({},t),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}})},b14e:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{staticClass:"d-flex",attrs:{fluid:"","fill-height":""}},[i("v-col",{ref:"roles",staticClass:"d-flex align-self-stretch pa-0 pr-1",attrs:{cols:"12",md:"3"}},[i("v-card",{staticStyle:{width:"100%"},attrs:{flat:""}},[i("v-card-title",[e.$permission("role:create")?i("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){e.createDialog=!0}}},[e._v(" New ")]):e._e(),e.$permission("role:delete")?i("v-btn",{staticClass:"ml-1 ml-md-2",attrs:{color:"error",small:"",disabled:0===e.selectedRoles.length},on:{click:function(t){e.deleteManyDialog=!0}}},[e._v(" Delete "),e.selectedRoles.length>0?i("span",[e._v("("+e._s(e.selectedRoles.length)+") ")]):e._e()]):e._e()],1),i("v-divider"),i("v-card-title",{staticClass:"pa-0"},[i("v-toolbar",{attrs:{flat:""}},[i("v-text-field",{attrs:{dense:"","append-icon":"mdi-magnify",label:"Filter by keyword","single-line":"","hide-details":"",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1),e.retrieveRolesAuthority?i("v-card-text",{staticClass:"pa-0 overflow-auto",style:{maxHeight:e.listHeight+"px"}},[i("v-list",{attrs:{dense:"",nav:""}},[i("v-list-item-group",{model:{value:e.activeRole,callback:function(t){e.activeRole=t},expression:"activeRole"}},[e._l(e.roles,(function(t,a){return[i("v-list-item",{key:a,staticClass:"my-0",attrs:{value:t.id,color:"primary"}},[i("v-checkbox",{staticClass:"customized-checkbox",attrs:{dense:"","hide-details":"",color:"primary",value:t.id},on:{click:function(e){e.stopPropagation(),e.preventDefault()}},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}}),i("v-list-item-content",[i("v-list-item-title",{attrs:{title:t.name}},[e._v(" "+e._s(t.name)+" ")]),i("v-list-item-subtitle",{attrs:{title:t.description}},[e._v(" "+e._s(t.description||"No description")+" ")])],1),e.$permission("role:update")?i("v-btn",{attrs:{icon:"","x-small":"",color:"primary"},on:{click:function(i){i.stopPropagation(),e.selectedRole=t,e.editDialog=!0}}},[i("v-icon",{attrs:{"x-small":""}},[e._v("mdi-pencil")])],1):e._e(),e.$permission("role:delete")?i("v-btn",{attrs:{icon:"","x-small":"",color:"error"},on:{click:function(i){i.stopPropagation(),e.selectedRole=t,e.deleteDialog=!0}}},[i("v-icon",{attrs:{"x-small":""}},[e._v("mdi-trash-can")])],1):e._e()],1),a<e.roles.length-1?i("v-divider",{key:"divider-"+a,staticClass:"ma-2"}):e._e()]}))],2)],1),e.loadingRoles?i("v-overlay",{attrs:{absolute:"",opacity:".07"}},[i("v-alert",{attrs:{color:"primary",text:""}},[i("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):e._e()],1):i("v-card",{staticClass:"d-flex align-center justify-center",style:{height:e.listHeight+"px"},attrs:{flat:""}},[e._v(" Don't have the authority to retrieve roles. ")])],1)],1),i("v-col",{staticClass:"d-flex flex-column align-self-stretch pa-0 pl-1",attrs:{cols:"12",md:"9"}},[e.activeRole?i("v-data-table",{staticClass:"flex-grow-1 border-radius-table",attrs:{headers:e.headers,items:e.permissions,height:e.tableHeight,loading:e.updating,"hide-default-footer":"","disable-pagination":"","fixed-header":""},scopedSlots:e._u([{key:"item.visit",fn:function(t){var a=t.item.visit;return e._l(a,(function(t,a){return i("v-checkbox",{key:a,staticClass:"d-inline-block mr-4 customized-checkbox black-label-checkbox",attrs:{dense:"","hide-details":"",label:t.text,value:t.value},model:{value:e.selectedPermissions,callback:function(t){e.selectedPermissions=t},expression:"selectedPermissions"}})}))}},{key:"item.action",fn:function(t){var a=t.item.action;return e._l(a,(function(t,a){return i("v-checkbox",{key:a,staticClass:"d-inline-block mr-4 customized-checkbox black-label-checkbox",attrs:{dense:"","hide-details":"",label:t.text,value:t.value},model:{value:e.selectedPermissions,callback:function(t){e.selectedPermissions=t},expression:"selectedPermissions"}})}))}}],null,!0)}):i("v-card",{staticClass:"align-self-stretch flex-grow-1 d-flex align-center justify-center",attrs:{flat:""}},[e._v(" "+e._s(e.$permission("role:update")?"Click certain role to edit permissions.":"Don't have the authority to edit roles.")+" ")]),e.$permission("role:update")?i("v-card",{staticClass:"d-flex align-center mt-2 px-4 py-2",attrs:{flat:"",width:"100%"}},[i("v-btn",{attrs:{small:"",color:"primary",disabled:!e.activeRole},on:{click:e.selectAllPermissions}},[e._v(" Select All ")]),i("v-btn",{staticClass:"ml-1 ml-md-2",attrs:{color:"primary",disabled:!e.activeRole||!e.modified,small:""},on:{click:e.updateBoundPermissions}},[e._v(" Save ")]),i("v-btn",{staticClass:"ml-1 ml-md-2",attrs:{color:"error",disabled:!e.activeRole||!e.modified,small:""},on:{click:function(t){return e.getBoundPermissions(e.activeRole)}}},[e._v(" Reset ")])],1):e._e()],1),i("create-dialog",{on:{reload:e.getRoles},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}}),i("delete-many-dialog",{attrs:{items:e.selectedRoles},on:{reload:e.getRoles},model:{value:e.deleteManyDialog,callback:function(t){e.deleteManyDialog=t},expression:"deleteManyDialog"}}),i("delete-dialog",{attrs:{item:e.selectedRole},on:{reload:e.getRoles},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}}),i("edit-dialog",{attrs:{item:e.selectedRole},on:{reload:e.getRoles},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}})],1)},r=[],n=i("1da1"),s=i("2909"),o=(i("96cf"),i("99af"),i("d81d"),i("a15b"),i("7db0"),i("ac1f"),i("1276"),i("4de4"),i("caad"),i("2532"),i("b0c0"),i("a4d3"),i("e01a"),i("cc5e")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"300px",persistent:""}},[i("v-card",[i("v-card-title",[e._v(" Delete Confirm ")]),i("v-card-text",{staticClass:"my-4"},[i("v-icon",{staticClass:"mr-1",attrs:{color:"warning",small:""}},[e._v("mdi-alert-circle")]),e._v(" Sure to delete this role? ")],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("input",!1)}}},[e._v(" Cancel ")]),i("v-btn",{attrs:{color:"primary",loading:e.submitting,text:""},on:{click:e.submit}},[e._v(" Confirm ")])],1)],1)],1)},c=[],d={props:["value","item"],data:function(){return{submitting:!1}},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Object(o["b"])([e.item.id]);case 3:e.submitting=!1,e.$emit("input",!1),e.$notify.success("Deleted!"),setTimeout((function(){e.$notify.loading("Reload.."),e.$emit("reload")}),800);case 7:case"end":return t.stop()}}),t)})))()}}},u=d,m=i("2877"),v=i("6544"),f=i.n(v),p=i("8336"),h=i("b0af"),g=i("99d9"),b=i("169a"),x=i("132d"),k=i("2fa4"),y=Object(m["a"])(u,l,c,!1,null,null,null),w=y.exports;f()(y,{VBtn:p["a"],VCard:h["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VDialog:b["a"],VIcon:x["a"],VSpacer:k["a"]});var C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"400px",persistent:""}},[i("v-card",[i("v-card-title",[e._v(" Delete Confirm ")]),i("v-card-text",{staticClass:"my-4"},[i("v-icon",{staticClass:"mr-1",attrs:{color:"warning",small:""}},[e._v("mdi-alert-circle")]),e._v(" Sure to delete these "+e._s(e.items.length)+" rolesï¼Ÿ ")],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("input",!1)}}},[e._v(" Cancel ")]),i("v-btn",{attrs:{color:"primary",loading:e.submitting,text:""},on:{click:e.submit}},[e._v(" Confirm ")])],1)],1)],1)},R=[],D={props:["value","items"],data:function(){return{submitting:!1}},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Object(o["b"])(e.items);case 3:e.submitting=!1,e.$emit("input",!1),e.$notify.success("Deleted!"),setTimeout((function(){e.$notify.loading("Reloading.."),e.$emit("reload")}),800);case 7:case"end":return t.stop()}}),t)})))()}}},V=D,_=Object(m["a"])(V,C,R,!1,null,null,null),$=_.exports;f()(_,{VBtn:p["a"],VCard:h["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VDialog:b["a"],VIcon:x["a"],VSpacer:k["a"]});var O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"400px",persistent:""}},[i("v-card",[i("v-card-title",[e._v(" Create Role ")]),i("v-card-text",[i("v-alert",{attrs:{text:"",type:"warning",icon:"mdi-alert-circle",dismissible:"","close-icon":"mdi-close"},model:{value:e.warningAlert,callback:function(t){e.warningAlert=t},expression:"warningAlert"}},[e._v(" "+e._s(e.indications.warning)+" ")]),i("v-alert",{attrs:{text:"",type:"error",icon:"mdi-alert",dismissible:"","close-icon":"mdi-close"},model:{value:e.errorAlert,callback:function(t){e.errorAlert=t},expression:"errorAlert"}},[e._v(" "+e._s(e.indications.error)+" ")]),i("v-form",{ref:"form",staticClass:"pt-4"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"Name*",required:"",rules:[function(e){return!!e||"Name cannot be empty!"}]},model:{value:e.formData["name"],callback:function(t){e.$set(e.formData,"name",t)},expression:"formData['name']"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"Description"},model:{value:e.formData["description"],callback:function(t){e.$set(e.formData,"description",t)},expression:"formData['description']"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("input",!1)}}},[e._v(" Cancel ")]),i("v-btn",{attrs:{color:"primary",loading:e.submitting,text:""},on:{click:e.create}},[e._v(" Confirm ")])],1)],1)],1)},A=[],j={props:["value","menus"],data:function(){return{indications:{warning:"",error:""},warningAlert:!1,errorAlert:!1,formData:{},submitting:!1}},watch:{value:function(e){e||(this.warningAlert=!1,this.errorAlert=!1,this.formData={},this.$refs.form.resetValidation())}},methods:{create:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$refs.form.validate(),!i){t.next=9;break}return e.submitting=!0,t.next=5,Object(o["a"])(e.formData);case 5:e.submitting=!1,e.$emit("input",!1),e.$notify.success("Created!"),setTimeout((function(){e.$notify.loading("Reloading.."),e.$emit("reload")}),800);case 9:case"end":return t.stop()}}),t)})))()}}},S=j,P=i("0798"),I=i("62ad"),T=i("4bd4"),N=i("0fd9"),J=i("8654"),B=Object(m["a"])(S,O,A,!1,null,null,null),E=B.exports;f()(B,{VAlert:P["a"],VBtn:p["a"],VCard:h["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:I["a"],VDialog:b["a"],VForm:T["a"],VRow:N["a"],VSpacer:k["a"],VTextField:J["a"]});var M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"400px",persistent:""}},[i("v-card",[i("v-card-title",[e._v(" Edit Role ")]),i("v-card-text",[i("v-alert",{attrs:{text:"",type:"warning",icon:"mdi-alert-circle",dismissible:"","close-icon":"mdi-close"},model:{value:e.warningAlert,callback:function(t){e.warningAlert=t},expression:"warningAlert"}},[e._v(e._s(e.indications.warning))]),i("v-alert",{attrs:{text:"",type:"error",icon:"mdi-alert",dismissible:"","close-icon":"mdi-close"},model:{value:e.errorAlert,callback:function(t){e.errorAlert=t},expression:"errorAlert"}},[e._v(e._s(e.indications.error))]),i("v-form",{ref:"form"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"Name*",required:"",rules:[function(e){return!!e||"Name cannot be empty!"}]},model:{value:e.formData["name"],callback:function(t){e.$set(e.formData,"name",t)},expression:"formData['name']"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"Description*"},model:{value:e.formData["description"],callback:function(t){e.$set(e.formData,"description",t)},expression:"formData['description']"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("input",!1)}}},[e._v(" Cancel ")]),i("v-btn",{attrs:{color:"primary",loading:e.submitting,text:""},on:{click:e.submit}},[e._v(" Confirm ")])],1)],1)],1)},L=[],F={props:["value","item"],data:function(){return{indications:{warning:"",error:""},warningAlert:!1,errorAlert:!1,formData:{},submitting:!1}},watch:{value:function(e){e?this.formData=JSON.parse(JSON.stringify(this.item)):(this.warningAlert=!1,this.errorAlert=!1,this.formData={},this.$refs.form.resetValidation())}},computed:{modified:function(){return JSON.stringify(this.formData)!==JSON.stringify(this.item)}},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$refs.form.validate(),!i){t.next=10;break}if(!e.modified){t.next=10;break}return e.submitting=!0,delete e.formData["id"],t.next=7,Object(o["d"])(e.item.id,e.formData);case 7:e.submitting=!1,e.$notify.success("Update saved!"),setTimeout((function(){e.$notify.loading("Reloading.."),e.$emit("reload")}),800);case 10:e.$emit("input",!1);case 11:case"end":return t.stop()}}),t)})))()}}},H=F,Q=Object(m["a"])(H,M,L,!1,null,null,null),z=Q.exports;f()(Q,{VAlert:P["a"],VBtn:p["a"],VCard:h["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:I["a"],VDialog:b["a"],VForm:T["a"],VRow:N["a"],VSpacer:k["a"],VTextField:J["a"]});var U=i("2a1f"),q={name:"RoleManagement",components:{CreateDialog:E,DeleteDialog:w,EditDialog:z,DeleteManyDialog:$},data:function(){return{activeRole:null,roles:[],selectedRoles:[],selectedRole:null,loadingRoles:!1,headers:[{text:"Module",value:"module"},{text:"Visit",value:"visit",sortable:!1},{text:"Action",value:"action",sortable:!1}],permissions:U,selectedPermissions:[],selectedPermissionsOrigin:[],updating:!1,createDialog:!1,deleteDialog:!1,deleteManyDialog:!1,editDialog:!1,rolesQuantity:[],keyword:""}},created:function(){this.getRoles()},watch:{activeRole:function(e){e?this.getBoundPermissions():(this.selectedPermissions=[],this.selectedPermissionsOrigin=[])},keyword:function(e){null===e?this.roles=JSON.parse(JSON.stringify(this.rolesQuantity)):this.filterRole(e)}},computed:{modified:function(){return JSON.stringify(this.selectedPermissions)!==JSON.stringify(this.selectedPermissionsOrigin)},tableHeight:function(){return window.screen.height-290},listHeight:function(){return window.screen.height-370},retrieveRolesAuthority:function(){return this.$permission("role:retrieve")}},methods:{selectAllPermissions:function(){this.selectedPermissions=this.permissions.reduce((function(e,t){return[].concat(Object(s["a"])(e),Object(s["a"])((t.visit||[]).map((function(e){return e.value}))),Object(s["a"])((t.action||[]).map((function(e){return e.value}))))}),[])},updateBoundPermissions:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updating=!0,i=e.selectedPermissions.join(","),t.next=4,Object(o["d"])(e.activeRole,{permissions:i});case 4:return a=e.roles.find((function(t){return t.id===e.activeRole})),a.permissions=i,e.updating=!1,e.$notify.success("Update saved!"),e.selectedPermissionsOrigin=Object(s["a"])(e.selectedPermissions),t.next=11,e.$store.dispatch("auth/setSignedInUser");case 11:if(0!==e.$store.getters.accessibleRoutes.length){t.next=15;break}return e.$notify.dismiss(),t.next=15,e.$router.push("/");case 15:case"end":return t.stop()}}),t)})))()},getBoundPermissions:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.roles.find((function(t){return t.id===e.activeRole})),e.selectedPermissions=(i.permissions||"").split(","),e.selectedPermissionsOrigin=Object(s["a"])(e.selectedPermissions);case 3:case"end":return t.stop()}}),t)})))()},getRoles:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.retrieveRolesAuthority){t.next=9;break}return e.selectedRoles=[],e.loadingRoles=!0,t.next=5,Object(o["c"])();case 5:e.roles=t.sent.result,e.rolesQuantity=JSON.parse(JSON.stringify(e.roles)),e.loadingRoles=!1,e.$notify.dismiss();case 9:case"end":return t.stop()}}),t)})))()},filterRole:function(e){this.roles=this.rolesQuantity.filter((function(t){return(t.name+t.description).includes(e)}))}}},G=q,K=i("ac7c"),W=i("a523"),X=i("8fea"),Y=i("ce7e"),Z=i("8860"),ee=i("da13"),te=i("5d23"),ie=i("1baa"),ae=i("a797"),re=i("490a"),ne=i("71d9"),se=Object(m["a"])(G,a,r,!1,null,null,null);t["default"]=se.exports;f()(se,{VAlert:P["a"],VBtn:p["a"],VCard:h["a"],VCardText:g["b"],VCardTitle:g["c"],VCheckbox:K["a"],VCol:I["a"],VContainer:W["a"],VDataTable:X["a"],VDivider:Y["a"],VIcon:x["a"],VList:Z["a"],VListItem:ee["a"],VListItemContent:te["a"],VListItemGroup:ie["a"],VListItemSubtitle:te["b"],VListItemTitle:te["c"],VOverlay:ae["a"],VProgressCircular:re["a"],VTextField:J["a"],VToolbar:ne["a"]})}}]);
//# sourceMappingURL=chunk-30bc8884.e7acf05b.js.map